<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="data:image/png;base64,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" rel="icon" type="image/x-icon">
    <link rel="stylesheet" href="css/style.css">
    <script src="src/index.js"></script>
    <title>Mood Tracker</title>

</head>
<body> 

<?php 
//call file to connect server eleave 
 
include ("mood-header.php"); 
?> 
 
<?php 
//This section processes submission from the login form 
//Check if the form has been submitted 
if($_SERVER['REQUEST_METHOD']=='POST') 
{ 
 //validate the userID 
 if (!empty($_POST['username'])) 
  { 
  $u = mysqli_real_escape_string($connect, $_POST['username']); 
 } 
 else 
 { 
  $u = FALSE; 
  echo '<p class = "error"> You forgot to enter your Username. </p>'; 
 } 
  
 //validate the adminPassword 
 if (!empty($_POST['userPassword'])) 
  { 
  $p = mysqli_real_escape_string($connect, $_POST['userPassword']); 
 } 
 else 
 { 
  $p = FALSE; 
  echo '<p class = "error"> You forgot to enter your password. </p>'; 
 } 
  
 //if no problems 
 if($u && $p) 
 { 

   
 $q = "SELECT userID, userPassword, username, userEmail 
 FROM user WHERE (username ='$u' AND userPassword ='$p')"; 
  
 //run the query and assign it to the variable $result 
 $result = mysqli_query ($connect, $q); 
  
 //count the number of rows that match the adminID/adminPassword combination 
 //if one database row (recod0 matches the input: 
 if (@mysqli_num_rows ($result) ==1) 
 { 
  //start the session, fetch the record and insert the three values in an array 
  session_start(); 
  $_SESSION = mysqli_fetch_array($result, MYSQLI_ASSOC); 
  header('location:moodtracker-1.php');

  // Get the logged-in user's ID (you need to set this during login)
  $userID = $_SESSION['userID'];
   
  //Cancel the rest of the script 
  exit(); 
   
  mysqli_free_result($result); 
  mysqli_close($connect); 
  //no match was made 
 } 
 else 
 { 
  echo '<p class="error"> The userName and userPassword entered do not match our records 
  <br> perhaps you need to register, just click the Register button</p>'; 
 } 
  
 //if there was a problems 
 } 
 else 
 { 
  echo '<p class ="error"> Please try again.</p>'; 
 } 
  
 mysqli_close($connect); 
} 
//end of submit conditional 

?> 

<?php
	//call header
	@include 'header.php';
  ?>
    
 <div class="container">
    <section class="checkout-form">

<h1 class="heading"> User Login</h1> 
<form action="signin.php" method="post"> 

<div class="flex"> 
    <div class="inputBox">
        <span>Username:</span>
        <input type="text" id="username" name="username" size="15" maxlength="60" required 
        value="<?php if (isset($_POST['username'])) echo $_POST ['username'];?>"> 
    </div> 

    <div class="inputBox">
        <span>Password:</span>
        <input type="password" id="userPassword" name="userPassword" size="15" maxlength="60" 
        pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required 
        value="<?php if (isset($_POST['userPassword'])) echo $_POST ['userPassword'];?>"> 
    </div> 
    

    </div>
        <input type="submit" value="Login" class="btn"> 
        <input type="reset" value="Reset" class="btn">
    
    <div> 
        <label>Don't have an account? 
        <a href="signup.php">Sign up</a> <br>
        Confused? <a href="USER_MANUAL_MOOD_TRACKING (1).pdf">Click Here</a> <br>
        If you're an admin <a href="adminsignin.php">Here</a>
        </label> 
    </div> 
    </form> 
</section>

</body>
</html>